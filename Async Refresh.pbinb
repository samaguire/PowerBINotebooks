{"cells":[{"kind":1,"value":"# Documentation","languageId":"markdown","mime":"text/markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"https://learn.microsoft.com/en-us/power-bi/connect-data/asynchronous-refresh\r\n\r\nhttps://learn.microsoft.com/en-us/power-bi/connect-data/incremental-refresh-overview#current-date-and-time\r\n\r\nhttps://learn.microsoft.com/en-us/analysis-services/tmsl/refresh-command-tmsl?view=asallproducts-allversions\r\n\r\nhttps://learn.microsoft.com/en-us/python/api/semantic-link-sempy/sempy.fabric?view=semantic-link-python#sempy-fabric-refresh-dataset","languageId":"markdown","mime":"text/markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"# Examples","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"## Full history refresh","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"### Set the date for incremental refresh","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"If an incremental refresh policy is applied, the effectiveDate parameter overrides the current date. If not specified, UTC is used to determine the current day.","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":2,"value":"%cmd\r\nSET EFFECTIVEDATE = 2024-04-04T00:00:00.000000Z","languageId":"powerbi-api","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"### Refesh existing table partitions","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"If commitMode is partialBatch, the refresh operation doesn’t occur within one transaction. Each command is committed individually. If there’s a failure, the model might be empty or include only a subset of the data.\r\n\r\nIf commitMode is partialBatch, applyRefreshPolicy of true isn't supported, and applyRefreshPolicy must be set to false.","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":2,"value":"POST v1.0/myorg/groups/5176f617-bf38-4168-bed1-6072be7d332e/datasets/7af1b22b-16a8-4208-801e-cf627410baa0/refreshes\r\n{\r\n    \"type\": \"full\",\r\n    \"commitMode\": \"partialBatch\",\r\n    \"applyRefreshPolicy\": \"false\"\r\n}","languageId":"powerbi-api","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"Alternativley, you could make a targeted request.","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":2,"value":"POST v1.0/myorg/groups/5176f617-bf38-4168-bed1-6072be7d332e/datasets/7af1b22b-16a8-4208-801e-cf627410baa0/refreshes\r\n{\r\n    \"type\": \"full\",\r\n    \"commitMode\": \"partialBatch\",\r\n    \"applyRefreshPolicy\": \"false\",\r\n    \"objects\": [\r\n        {\r\n            \"table\": \"Transactional\"\r\n        }\r\n    ]\r\n}","languageId":"powerbi-api","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"### Generate new partitions in accordance with incremental refresh policy","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"If type is automatic and the object needs to be refreshed and recalculated, refresh and recalculate the object and all its dependents. Applies if the partition is in a state other than Ready.","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":2,"value":"POST v1.0/myorg/groups/5176f617-bf38-4168-bed1-6072be7d332e/datasets/7af1b22b-16a8-4208-801e-cf627410baa0/refreshes\r\n{\r\n    \"type\": \"automatic\",\r\n    \"commitMode\": \"transactional\",\r\n    \"applyRefreshPolicy\": \"true\",\r\n    \"effectiveDate\": \"$(EFFECTIVEDATE)\"\r\n}","languageId":"powerbi-api","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"Alternativley, you could make a targeted request.","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":2,"value":"POST v1.0/myorg/groups/5176f617-bf38-4168-bed1-6072be7d332e/datasets/7af1b22b-16a8-4208-801e-cf627410baa0/refreshes\r\n{\r\n    \"type\": \"automatic\",\r\n    \"commitMode\": \"transactional\",\r\n    \"applyRefreshPolicy\": \"true\",\r\n    \"effectiveDate\": \"$(EFFECTIVEDATE)\",\r\n    \"objects\": [\r\n        {\r\n            \"table\": \"Transactional\"\r\n        }\r\n    ]\r\n}","languageId":"powerbi-api","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"## Full refresh specific partitions","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":2,"value":"POST v1.0/myorg/groups/5176f617-bf38-4168-bed1-6072be7d332e/datasets/7af1b22b-16a8-4208-801e-cf627410baa0/refreshes\r\n{\r\n    \"type\": \"full\",\r\n    \"commitMode\": \"partialBatch\",\r\n    \"applyRefreshPolicy\": \"false\",\r\n    \"objects\": [\r\n        {\r\n            \"table\": \"Transactional\",\r\n            \"partition\": \"2022\"\r\n        },\r\n        {\r\n            \"table\": \"Transactional\",\r\n            \"partition\": \"2023\"\r\n        }\r\n    ]\r\n}","languageId":"powerbi-api","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"## Full refresh","languageId":"markdown","mime":"text/markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":1,"value":"This is the refresh setup that is executed in the service. Table partitions outside of the incremental periods scope for a table's incremental refresh policy will not be updated.","languageId":"markdown","outputs":[],"metadata":{},"executionSummary":{}},{"kind":2,"value":"%cmd\r\nSET EFFECTIVEDATE = 2024-04-04T00:00:00.000000Z","languageId":"powerbi-api","outputs":[],"metadata":{},"executionSummary":{}},{"kind":2,"value":"POST v1.0/myorg/groups/5176f617-bf38-4168-bed1-6072be7d332e/datasets/7af1b22b-16a8-4208-801e-cf627410baa0/refreshes\r\n{\r\n    \"type\": \"full\",\r\n    \"commitMode\": \"transactional\",\r\n    \"applyRefreshPolicy\": \"true\",\r\n    \"effectiveDate\": \"$(EFFECTIVEDATE)\",\r\n    \"objects\": []\r\n}","languageId":"powerbi-api","outputs":[],"metadata":{},"executionSummary":{}}],"metadata":{"context":{"variables":{"EFFECTIVEDATE":"2024-04-04T00:00:00.000000Z"},"apiRootPath":"/groups","uri":{"$mid":1,"external":"file:///c%3A/Users/maguires/OneDrive/Documents/Git%20Repositories/PowerBINotebooks/Async%20Refresh.pbinb","path":"/c:/Users/maguires/OneDrive/Documents/Git Repositories/PowerBINotebooks/Async Refresh.pbinb","scheme":"file"}}}}